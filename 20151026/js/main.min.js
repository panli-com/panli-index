!function(){var t=function(){var t=document.body.getBoundingClientRect().width,e=750,n=40;t>e&&(t=e),320>t&&(t=320),window.W=t,document.getElementsByTagName("html")[0].style.fontSize=(t/e*n).toFixed(2)+"px"};window.addEventListener("resize",function(){setTimeout(t,300)}),window.addEventListener("DOMContentLoaded",t),setTimeout(t,300)}(),function(t){t.extend(t,{contains:function(t,e){return t.compareDocumentPosition?!!(16&t.compareDocumentPosition(e)):t!==e&&t.contains(e)}})}(Zepto),function(t,e){t.extend(t,{toString:function(t){return Object.prototype.toString.call(t)},slice:function(t,e){return Array.prototype.slice.call(t,e||0)},later:function(t,e,n,o,i){return window["set"+(n?"Interval":"Timeout")](function(){t.apply(o,i)},e||0)},parseTpl:function(t,e){var n="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(t,e){return"',"+e.replace(/\\'/g,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(t,e){return"');"+e.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",o=new Function("obj",n);return e?o(e):o},throttle:function(n,o,i){function r(){function t(){a=Date.now(),o.apply(l,u)}function r(){s=e}var l=this,c=Date.now()-a,u=arguments;i&&!s&&t(),s&&clearTimeout(s),i===e&&c>n?t():s=setTimeout(i?r:t,i===e?n-c:n)}var s,a=0;return"function"!=typeof o&&(i=o,o=n,n=250),r._zid=o._zid=o._zid||t.proxy(o)._zid,r},debounce:function(n,o,i){return o===e?t.throttle(250,n,!1):t.throttle(n,o,i===e?!1:i!==!1)}}),t.each("String Boolean RegExp Number Date Object Null Undefined".split(" "),function(o,i){var r;if(!("is"+i in t)){switch(i){case"Null":r=function(t){return null===t};break;case"Undefined":r=function(t){return t===e};break;default:r=function(t){return new RegExp(i+"]","i").test(n(t))}}t["is"+i]=r}});var n=t.toString}(Zepto),function(t,e){var n=navigator.userAgent,o=navigator.appVersion,i=t.browser;t.extend(i,{qq:/qq/i.test(n),uc:/UC/i.test(n)||/UC/i.test(o)}),i.uc=i.uc||!i.qq&&!i.chrome&&!i.firefox&&!/safari/i.test(n);try{i.version=i.uc?o.match(/UC(?:Browser)?\/([\d.]+)/)[1]:i.qq?n.match(/MQQBrowser\/([\d.]+)/)[1]:i.version}catch(r){}t.support=t.extend(t.support||{},{orientation:!(i.uc||parseFloat(t.os.version)<5&&(i.qq||i.chrome))&&!(t.os.android&&parseFloat(t.os.version)>3)&&"orientation"in window&&"onorientationchange"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,has3d:"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix})}(Zepto),function(t){function e(){t(window).on("scroll",t.debounce(80,function(){t(document).trigger("scrollStop")},!1))}function n(){t(window).off("scroll"),e()}t.matchMedia=function(){var e=0,n="gmu-media-detect",o=t.fx.transitionEnd,i=t.fx.cssPrefix,r=t("<style></style>").append("."+n+"{"+i+"transition: width 0.001ms; width: 0; position: relative; bottom: -999999px;}\n").appendTo("head");return function(i){var s,a=n+e++,l=t('<div class="'+n+'" id="'+a+'"></div>').appendTo("body"),c=[];return r.append("@media "+i+" { #"+a+" { width: 100px; } }\n"),l.on(o,function(){s.matches=100===l.width(),t.each(c,function(e,n){t.isFunction(n)&&n.call(s,s)})}),s={matches:100===l.width(),media:i,addListener:function(t){return c.push(t),this},removeListener:function(t){var e=c.indexOf(t);return~e&&c.splice(e,1),this}}}}(),t(function(){var e=function(e){n!==e.matches&&(t(window).trigger("ortchange"),n=e.matches)},n=!0;t.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},t.matchMedia(t.mediaQuery.ortchange).addListener(e)}),e(),t(window).on("pageshow",function(e){e.persisted&&t(document).off("touchstart",n).one("touchstart",n)})}(Zepto),function(t,e){function n(){return a++}function o(e,n){var o={};return Object.create?o=Object.create(e):o.__proto__=e,t.extend(o,n||{})}function i(e,n){return n&&(r(e,n),t.extend(e.prototype,n)),t.extend(e,{plugins:[],register:function(e){return t.isObject(e)?void t.extend(this.prototype,e):void this.plugins.push(e)}})}function r(e,n){var i,r=n.inherit||d,s=r.prototype;return i=e.prototype=o(s,{$factory:e,$super:function(e){var n=s[e];return t.isFunction(n)?n.apply(this,t.slice(arguments,1)):n}}),i._data=t.extend({},s._data,n._data),delete n._data,e}function s(n){t.fn[n]=function(o){var i,r,s=t.slice(arguments,1);return t.each(this,function(a,l){if(r=u(l,n)||t.ui[n](l,t.extend(t.isPlainObject(o)?o:{},{setup:!0})),t.isString(o)){if(!t.isFunction(r[o])&&"this"!==o)throw new Error(n+"组件没有此方法");i=t.isFunction(r[o])?r[o].apply(r,s):e}return i!==e&&i!==r||"this"===o&&(i=r)?!1:void(i=e)}),i!==e?i:this}}var a=1,l=function(){},c="<%=name%>-<%=id%>",u=function(){var e={},n=0,o="GMUWidget"+ +new Date;return function(i,r,s){var a=i[o]||(i[o]=++n),l=e[a]||(e[a]={});return!t.isUndefined(s)&&(l[r]=s),t.isNull(s)&&delete l[r],l[r]}}();t.ui=t.ui||{version:"2.0.5",guid:n,define:function(e,r,a){a&&(r.inherit=a);var l=t.ui[e]=i(function(i,r){var s=o(l.prototype,{_id:t.parseTpl(c,{name:e,id:n()})});return s._createWidget.call(s,i,r,l.plugins),s},r);return s(e,l)},isWidget:function(n,o){return n instanceof(o===e?d:t.ui[o]||l)}};var d=function(){};t.extend(d.prototype,{_data:{status:!0},data:function(e,n){var o=this._data;return t.isObject(e)?t.extend(o,e):t.isUndefined(n)?o[e]:o[e]=n},_createWidget:function(n,o,i){t.isObject(n)&&(o=n||{},n=e);var r=t.extend({},this._data,o);t.extend(this,{_el:n?t(n):e,_data:r});var s=this;t.each(i,function(e,n){var o=n.apply(s);if(o&&t.isPlainObject(o)){var i=s._data.disablePlugin;(!i||t.isString(i)&&!~i.indexOf(o.pluginName))&&(delete o.pluginName,t.each(o,function(e,n){var o;(o=s[e])&&t.isFunction(n)?s[e]=function(){return s[e+"Org"]=o,n.apply(s,arguments)}:s[e]=n}))}}),r.setup?this._setup(n&&n.getAttribute("data-mode")):this._create(),this._init();var s=this,a=this.trigger("init").root();a.on("tap",function(t){(t.bubblesList||(t.bubblesList=[])).push(s)}),u(a[0],s._id.split("-")[0],s)},_create:function(){},_setup:function(t){},root:function(t){return this._el=t||this._el},id:function(t){return this._id=t||this._id},destroy:function(){var e,n=this;e=this.trigger("destroy").off().root(),e.find("*").off(),u(e[0],n._id.split("-")[0],null),e.off().remove(),this.__proto__=null,t.each(this,function(t){delete n[t]})},on:function(e,n){return this.root().on(e,t.proxy(n,this)),this},off:function(t,e){return this.root().off(t,e),this},trigger:function(e,n){e=t.isString(e)?t.Event(e):e;var o,i=this.data(e.type);return i&&t.isFunction(i)&&(e.data=n,o=i.apply(this,[e].concat(n)),o===!1||e.defaultPrevented)?this:(this.root().trigger(e,n),this)}})}(Zepto),function(t,e){function n(t){return""===s?t:(t=t.charAt(0).toUpperCase()+t.substr(1),s+t)}var o=Math,i=[],r=e.createElement("div").style,s=function(){for(var t,e="webkitT,MozT,msT,OT,t".split(","),n=0,o=e.length;o>n;n++)if(t=e[n]+"ransform",t in r)return e[n].substr(0,e[n].length-1);return!1}(),a=s?"-"+s.toLowerCase()+"-":"",l=n("transform"),c=n("transitionProperty"),u=n("transitionDuration"),d=n("transformOrigin"),p=n("transitionTimingFunction"),f=(n("transitionDelay"),/android/gi.test(navigator.appVersion)),h=/hp-tablet/gi.test(navigator.appVersion),m=n("perspective")in r,v="ontouchstart"in t&&!h,g=!!s,_=n("transition")in r,S="onorientationchange"in t?"orientationchange":"resize",x=v?"touchstart":"mousedown",w=v?"touchmove":"mousemove",b=v?"touchend":"mouseup",y=v?"touchcancel":"mouseup",T=function(){if(s===!1)return!1;var t={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return t[s]}(),E=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){return setTimeout(t,1)}}(),Y=function(){return t.cancelRequestAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),C=m?" translateZ(0)":"",D=function(n,o){var i,r=this;r.wrapper="object"==typeof n?n:e.getElementById(n),r.wrapper.style.overflow="hidden",r.scroller=r.wrapper.children[0],r.translateZ=C,r.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,onRefresh:null,onBeforeScrollStart:function(t){t.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in o)r.options[i]=o[i];r.x=r.options.x,r.y=r.options.y,r.options.useTransform=g&&r.options.useTransform,r.options.useTransition=_&&r.options.useTransition,r.scroller.style[c]=r.options.useTransform?a+"transform":"top left",r.scroller.style[u]="0",r.scroller.style[d]="0 0",r.options.useTransition&&(r.scroller.style[p]="cubic-bezier(0.33,0.66,0.66,1)"),r.options.useTransform?r.scroller.style[l]="translate("+r.x+"px,"+r.y+"px)"+C:r.scroller.style.cssText+=";position:absolute;top:"+r.y+"px;left:"+r.x+"px",r.refresh(),r._bind(S,t),r._bind(x),r.options.checkDOMChanges&&(r.checkDOMTime=setInterval(function(){r._checkDOMChanges()},500))};D.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,isStopScrollAction:!1,handleEvent:function(t){var e=this;switch(t.type){case x:if(!v&&0!==t.button)return;e._start(t);break;case w:e._move(t);break;case b:case y:e._end(t);break;case S:e._resize();break;case T:e._transitionEnd(t)}},_checkDOMChanges:function(){this.moved||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_resize:function(){var t=this;setTimeout(function(){t.refresh()},f?200:0)},_pos:function(t,e){t=this.hScroll?t:0,e=this.vScroll?e:0,this.options.useTransform?this.scroller.style[l]="translate("+t+"px,"+e+"px) scale("+this.scale+")"+C:(t=o.round(t),e=o.round(e),this.scroller.style.left=t+"px",this.scroller.style.top=e+"px"),this.x=t,this.y=e},_start:function(e){var n,o,i,r=this,s=v?e.touches[0]:e;r.enabled&&(r.options.onBeforeScrollStart&&r.options.onBeforeScrollStart.call(r,e),r.options.useTransition&&r._transitionTime(0),r.moved=!1,r.animating=!1,r.distX=0,r.distY=0,r.absDistX=0,r.absDistY=0,r.dirX=0,r.dirY=0,r.isStopScrollAction=!1,r.options.momentum&&(r.options.useTransform?(n=getComputedStyle(r.scroller,null)[l].replace(/[^0-9\-.,]/g,"").split(","),o=+n[4],i=+n[5]):(o=+getComputedStyle(r.scroller,null).left.replace(/[^0-9-]/g,""),i=+getComputedStyle(r.scroller,null).top.replace(/[^0-9-]/g,"")),(o!=r.x||i!=r.y)&&(r.isStopScrollAction=!0,r.options.useTransition?r._unbind(T):Y(r.aniTime),r.steps=[],r._pos(o,i),r.options.onScrollEnd&&r.options.onScrollEnd.call(r))),r.startX=r.x,r.startY=r.y,r.pointX=s.pageX,r.pointY=s.pageY,r.startTime=e.timeStamp||Date.now(),r.options.onScrollStart&&r.options.onScrollStart.call(r,e),r._bind(w,t),r._bind(b,t),r._bind(y,t))},_move:function(t){var e=this,n=v?t.touches[0]:t,i=n.pageX-e.pointX,r=n.pageY-e.pointY,s=e.x+i,a=e.y+r,l=t.timeStamp||Date.now();e.options.onBeforeScrollMove&&e.options.onBeforeScrollMove.call(e,t),e.pointX=n.pageX,e.pointY=n.pageY,(s>0||s<e.maxScrollX)&&(s=e.options.bounce?e.x+i/2:s>=0||e.maxScrollX>=0?0:e.maxScrollX),(a>e.minScrollY||a<e.maxScrollY)&&(a=e.options.bounce?e.y+r/2:a>=e.minScrollY||e.maxScrollY>=0?e.minScrollY:e.maxScrollY),e.distX+=i,e.distY+=r,e.absDistX=o.abs(e.distX),e.absDistY=o.abs(e.distY),e.absDistX<6&&e.absDistY<6||(e.options.lockDirection&&(e.absDistX>e.absDistY+5?(a=e.y,r=0):e.absDistY>e.absDistX+5&&(s=e.x,i=0)),e.moved=!0,e._beforePos?e._beforePos(a,r)&&e._pos(s,a):e._pos(s,a),e.dirX=i>0?-1:0>i?1:0,e.dirY=r>0?-1:0>r?1:0,l-e.startTime>300&&(e.startTime=l,e.startX=e.x,e.startY=e.y),e.options.onScrollMove&&e.options.onScrollMove.call(e,t))},_end:function(n){if(!v||0===n.touches.length){var i,r,s,a=this,l=v?n.changedTouches[0]:n,c={dist:0,time:0},u={dist:0,time:0},d=(n.timeStamp||Date.now())-a.startTime,p=a.x,f=a.y;if(a._unbind(w,t),a._unbind(b,t),a._unbind(y,t),a.options.onBeforeScrollEnd&&a.options.onBeforeScrollEnd.call(a,n),!a.moved)return v&&this.options.handleClick&&!a.isStopScrollAction&&(a.doubleTapTimer=setTimeout(function(){for(a.doubleTapTimer=null,i=l.target;1!=i.nodeType;)i=i.parentNode;"SELECT"!=i.tagName&&"INPUT"!=i.tagName&&"TEXTAREA"!=i.tagName&&(r=e.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,n.view,1,l.screenX,l.screenY,l.clientX,l.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),r._fake=!0,i.dispatchEvent(r))},0)),a._resetPos(400),void(a.options.onTouchEnd&&a.options.onTouchEnd.call(a,n));if(300>d&&a.options.momentum&&(c=p?a._momentum(p-a.startX,d,-a.x,a.scrollerW-a.wrapperW+a.x,a.options.bounce?a.wrapperW:0):c,u=f?a._momentum(f-a.startY,d,-a.y,a.maxScrollY<0?a.scrollerH-a.wrapperH+a.y-a.minScrollY:0,a.options.bounce?a.wrapperH:0):u,p=a.x+c.dist,f=a.y+u.dist,(a.x>0&&p>0||a.x<a.maxScrollX&&p<a.maxScrollX)&&(c={dist:0,time:0}),(a.y>a.minScrollY&&f>a.minScrollY||a.y<a.maxScrollY&&f<a.maxScrollY)&&(u={dist:0,time:0})),c.dist||u.dist)return s=o.max(o.max(c.time,u.time),10),a.scrollTo(o.round(p),o.round(f),s),void(a.options.onTouchEnd&&a.options.onTouchEnd.call(a,n));a._resetPos(200),a.options.onTouchEnd&&a.options.onTouchEnd.call(a,n)}},_resetPos:function(t){var e=this,n=e.x>=0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,o=e.y>=e.minScrollY||e.maxScrollY>0?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y;return n==e.x&&o==e.y?void(e.moved&&(e.moved=!1,e.options.onScrollEnd&&e.options.onScrollEnd.call(e),e._afterPos&&e._afterPos())):void e.scrollTo(n,o,t||0)},_transitionEnd:function(t){var e=this;t.target==e.scroller&&(e._unbind(T),e._startAni())},_startAni:function(){var t,e,n,i=this,r=i.x,s=i.y,a=Date.now();if(!i.animating){if(!i.steps.length)return void i._resetPos(400);if(t=i.steps.shift(),t.x==r&&t.y==s&&(t.time=0),i.animating=!0,i.moved=!0,i.options.useTransition)return i._transitionTime(t.time),i._pos(t.x,t.y),i.animating=!1,void(t.time?i._bind(T):i._resetPos(0));n=function(){var l,c,u=Date.now();return u>=a+t.time?(i._pos(t.x,t.y),i.animating=!1,i.options.onAnimationEnd&&i.options.onAnimationEnd.call(i),void i._startAni()):(u=(u-a)/t.time-1,e=o.sqrt(1-u*u),l=(t.x-r)*e+r,c=(t.y-s)*e+s,i._pos(l,c),void(i.animating&&(i.aniTime=E(n))))},n()}},_transitionTime:function(t){t+="ms",this.scroller.style[u]=t},_momentum:function(t,e,n,i,r){var s=6e-4,a=o.abs(t)*(this.options.speedScale||1)/e,l=a*a/(2*s),c=0,u=0;return t>0&&l>n?(u=r/(6/(l/a*s)),n+=u,a=a*n/l,l=n):0>t&&l>i&&(u=r/(6/(l/a*s)),i+=u,a=a*i/l,l=i),l*=0>t?-1:1,c=a/s,{dist:l,time:o.round(c)}},_offset:function(t){for(var e=-t.offsetLeft,n=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,n-=t.offsetTop;return t!=this.wrapper&&(e*=this.scale,n*=this.scale),{left:e,top:n}},_bind:function(t,e,n){i.concat([e||this.scroller,t,this]),(e||this.scroller).addEventListener(t,this,!!n)},_unbind:function(t,e,n){(e||this.scroller).removeEventListener(t,this,!!n)},destroy:function(){var n=this;n.scroller.style[l]="",n._unbind(S,t),n._unbind(x),n._unbind(w,t),n._unbind(b,t),n._unbind(y,t),n.options.useTransition&&n._unbind(T),n.options.checkDOMChanges&&clearInterval(n.checkDOMTime),n.options.onDestroy&&n.options.onDestroy.call(n);for(var o=0,r=i.length;r>o;)i[o].removeEventListener(i[o+1],i[o+2]),i[o]=null,o+=3;i=[];var s=e.createElement("div");s.appendChild(this.wrapper),s.innerHTML="",n.wrapper=n.scroller=s=null},refresh:function(){var t,e=this;e.wrapperW=e.wrapper.clientWidth||1,e.wrapperH=e.wrapper.clientHeight||1,e.minScrollY=-e.options.topOffset||0,e.scrollerW=o.round(e.scroller.offsetWidth*e.scale),e.scrollerH=o.round((e.scroller.offsetHeight+e.minScrollY)*e.scale),e.maxScrollX=e.wrapperW-e.scrollerW,e.maxScrollY=e.wrapperH-e.scrollerH+e.minScrollY,e.dirX=0,e.dirY=0,e.options.onRefresh&&e.options.onRefresh.call(e),e.hScroll=e.options.hScroll&&e.maxScrollX<0,e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH),t=e._offset(e.wrapper),e.wrapperOffsetLeft=-t.left,e.wrapperOffsetTop=-t.top,e.scroller.style[u]="0",e._resetPos(400)},scrollTo:function(t,e,n,o){var i,r,s=this,a=t;for(s.stop(),a.length||(a=[{x:t,y:e,time:n,relative:o}]),i=0,r=a.length;r>i;i++)a[i].relative&&(a[i].x=s.x-a[i].x,a[i].y=s.y-a[i].y),s.steps.push({x:a[i].x,y:a[i].y,time:a[i].time||0});s._startAni()},scrollToElement:function(t,e){var n,i=this;t=t.nodeType?t:i.scroller.querySelector(t),t&&(n=i._offset(t),n.left+=i.wrapperOffsetLeft,n.top+=i.wrapperOffsetTop,n.left=n.left>0?0:n.left<i.maxScrollX?i.maxScrollX:n.left,n.top=n.top>i.minScrollY?i.minScrollY:n.top<i.maxScrollY?i.maxScrollY:n.top,e=void 0===e?o.max(2*o.abs(n.left),2*o.abs(n.top)):e,i.scrollTo(n.left,n.top,e))},scrollToPage:function(t,e,n){var o,i,r=this;n=void 0===n?400:n,r.options.onScrollStart&&r.options.onScrollStart.call(r),o=-r.wrapperW*t,i=-r.wrapperH*e,o<r.maxScrollX&&(o=r.maxScrollX),i<r.maxScrollY&&(i=r.maxScrollY),r.scrollTo(o,i,n)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(w,t),this._unbind(b,t),this._unbind(y,t)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(T):Y(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},isReady:function(){return!this.moved&&!this.animating}},r=null,"undefined"!=typeof exports?exports.iScroll=D:t.iScroll=D,function(e){function n(t,e){var n="iscroll"+i++;return t.data("_iscroll_",n),r[n]=new o(t[0],e)}if(e){var o=D,i=0,r={};t.iScroll=function(t,o){return n(e("string"==typeof t?"#"+t:t),o)},e.fn.iScroll=function(t){var o=[];return this.each(function(i,s){if("string"==typeof t){var a,l=r[e(s).data("_iscroll_")];if(l&&(a=l[t])){var c=e.isFunction(a)?a.apply(l,Array.prototype.slice.call(arguments,1)):a;c!==l&&void 0!==c&&o.push(c)}}else e(s).data("_iscroll_")||n(e(s),t)}),o.length?o:this}}}(t.Zepto||null)}(window,document),function(t,e){var n='<% for (var i=0, len=left.length; i<len; i++) { %><a href="<%=left[i].url%>" class="ui-navigator-fix ui-navigator-fixleft"><%=left[i].text%></a><% } %><ul class="ui-navigator-list"><% for (var i=0, len=mid.length; i<len; i++) { %><li><a href="<%=mid[i].url%>"><%=mid[i].text%></a></li><% } %></ul><% for (var i=0, len=right.length; i<len; i++) { %><a href="<%=right[i].url%>" class="ui-navigator-fix ui-navigator-fixright"><%=right[i].text%></a><% } %>';t.ui.define("navigator",{_data:{container:"",content:[],defTab:0,beforetabselect:null,tabselect:null},_create:function(){var e,o=this,i=o._data,r=o.root(),s=t(i.container||document.body).get(0),a={left:[],mid:[],right:[]};t.each(i.content,function(){a[this.pos?this.pos:"mid"].push(this)}),e=t.parseTpl(n,a),r?(r.append(e),(!r.parent().length||s!==document.body)&&r.appendTo(s)):o.root(t("<div></div>").append(e)).appendTo(s)},_setup:function(e){var n=this,o=n._data,i=o.defTab,r=n.root();e||(r.children("a").addClass("ui-navigator-fix"),r.children("ul").addClass("ui-navigator-list")),r.find("a").each(function(e){0===i?t(this).hasClass("cur")&&(o.defTab=e):t(this).removeClass("cur")})},_init:function(){var e=this,n=e._data,o=e.root(),i=n.content,r=o.find("a");r.each(function(e){this.index=e,i.length&&i[e].attr&&t(this).attr(i[e].attr)}),n._$tabList=r,n._lastIndex=-1,o.addClass("ui-navigator").on("click",t.proxy(e._switchTabHandler,e)),e.switchTo(n.defTab,!0)},_switchTabHandler:function(e){var n=this,o=e.target;return t(o).closest("a").get(0)&&n.switchTo(o.index,!1,e),n},switchTo:function(e,n,o){var i=this,r=i._data,s=r._lastIndex,a=r._$tabList,l=t.Event("beforetabselect");return i.trigger(l,[a[e]]),l.defaultPrevented?(o&&o.preventDefault(),i):s==e?(o&&o.preventDefault(),i):(s>=0&&a.eq(s).removeClass("cur"),a.eq(e).addClass("cur"),r._lastIndex=e,i.trigger("tabselect",[a.get(e),e]))},getCurTab:function(){var t=this,e=t._data,n=e._lastIndex;return{index:n,info:e._$tabList[n]}}})}(Zepto),function(t,e){t.ui.navigator.register(function(){return{pluginName:"iscroll",_init:function(){return this._adjustHtml()._reBindEvent()._initOrg()},_reBindEvent:function(){var n=this,o=n._data;return o.isScrollToNext=o.isScrollToNext===e?!0:o.isScrollToNext,o.isShowShadow=o.isShowShadow===e?!0:o.isShowShadow,n._loadIscroll(),t(window).on("ortchange",t.proxy(n._ortChangeHandler,n)),n.on("destroy",function(){t(window).off("ortchange",n._ortChangeHandler),o.iScroll.destroy()}),n},_adjustHtml:function(){var e=this,n=e._data,o=e.root().addClass("ui-navigator"),i=o.find("ul"),r=o.find(".ui-navigator-wrapper"),s=i.find("li"),a=[0];return!r.length&&i.wrap('<div class="ui-navigator-wrapper"></div>'),i.find("li").each(function(t){a[t]=t?a[t-1]+this.offsetWidth:a[t]+this.offsetLeft-i[0].offsetLeft+this.offsetWidth}),t.extend(n,{_$navWrapper:o.find(".ui-navigator-wrapper"),_$navScroller:i.width(a[s.length-1]),_$navList:s,_scrollerNum:s.length,_scrollerSumWidth:a,_$fixElemLeft:o.find(".ui-navigator-fixleft"),_$fixElemRight:o.find(".ui-navigator-fixright")}),e},_loadIscroll:function(){var e=this,n=e._data;return n.iScroll=iScroll(n._$navWrapper.get(0),n.iScrollOpts=t.extend({hScroll:!0,vScroll:!1,hScrollbar:!1,vScrollbar:!1},n.iScrollOpts,{onScrollStart:function(t){e.trigger("scrollstart",t)},onScrollMove:function(t){e.trigger("scrollmove",t)},onScrollEnd:function(t){n.isShowShadow&&e._setShadow(),e.trigger("scrollend",t)}})),e},_setShadow:function(){var t=this,e=t._data,n=e._$navWrapper,o={left:"ui-navigator-shadowl",right:"ui-navigator-shadowr",all:"ui-navigator-shadowall"},i=e.iScroll,r=i.x;return 0>r?(n.removeClass(o.left+" "+o.right).addClass(o.all),r<=i.maxScrollX&&n.removeClass(o.all+" "+o.right).addClass(o.left)):(n.removeClass(o.all+" "+o.left),i.hScroll?n.addClass(o.right):n.removeClass(o.all+" "+o.left+" "+o.right)),t},_scrollToNext:function(t,e){var n=this,o=n._data,i=o._scrollerSumWidth,r=o.iScroll;return r.scrollTo("last"==e?r.wrapperW-(i[t+1]||i[i.length-1]):"first"==e?-i[t-2]||0:r.x,0,400),n},_getPos:function(t){var e=this,n=e._data,o=n.iScroll,i=Math.abs(o.x)||0,r=n._scrollerSumWidth,s=n._$navList,a=r[t]-i,l=r[t-1||0]-i,c=(r[t+1]||r[r.length-1])-i,u=o.wrapperW;return a>=u||c>u?"last":a<=s[t].offsetWidth||l<s[t-1].offsetWidth?"first":"middle"},_ortChangeHandler:function(){var t=this,e=t._data,n=e.iScroll;n.refresh(),t._setShadow(),e._$navWrapper.width(n.wrapperW-n.wrapperOffsetLeft)},switchTo:function(t,e,n){var o=this,i=o._data;if(o.switchToOrg(t,e,n),!i._$tabList.eq(t).hasClass("ui-navigator-fix")){var r=i._$fixElemLeft,t=t-(r.length?r.length:0),s=o._getPos(t);e&&i.isShowShadow&&o._setShadow(),i.isScrollToNext&&o._scrollToNext(t,s)}return o}}})}(Zepto),function(){$(function(){$("#head-nav").navigator({isScrollToNext:!0,isShowShadow:!1})})}();